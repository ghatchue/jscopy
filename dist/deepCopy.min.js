/* Copyright 2015 Oran Looney. https://github.com/olooney/deep-copy-js/blob/master/LICENSE.txt */
"use strict";var owl=function(){function a(){}function b(b){return null!==b&&"object"==typeof b?(a.prototype=b,new a):b}function c(a){return a instanceof Number||a instanceof String||a instanceof Boolean||a instanceof Date}function d(a,b){Object.getOwnPropertyNames(a).forEach(function(c){Object.defineProperty(b,c,Object.getOwnPropertyDescriptor(a,c))})}function e(a,b){if(k.hasDontEnumBug)for(var c=0;c<k.dontEnumFunctions.length;c++){var d=k.dontEnumFunctions[c];Object.prototype.hasOwnProperty.call(a,d)&&(b[d]=a[d])}}function f(a){if(null===a||"object"!=typeof a)return a;if(c(a))return new a.constructor(a.valueOf());var f,g;if(a instanceof a.constructor&&a.constructor!==Object)if(f=b(a.constructor.prototype),k.hasDefineProperty)d(a,f);else{for(g in a)Object.prototype.hasOwnProperty.call(a,g)&&(f[g]=a[g]);e(a,f)}else if(f={},k.hasDefineProperty)d(a,f);else{for(g in a)f[g]=a[g];e(a,f)}return f}function g(a){for(var b in a)this[b]=a[b]}function h(){this.copiedObjects=[];var a=this;this.recursiveDeepCopy=function(b){return a.deepCopy(b)},this.depth=0}function i(a,b){var c=new h;return b&&(c.maxDepth=b),c.deepCopy(a)}function j(a){return window.Node?a instanceof Node:a===document?!0:"number"==typeof a.nodeType&&a.attributes&&a.childNodes&&a.cloneNode}var k={hasDefineProperty:"function"==typeof Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}(),hasDontEnumBug:function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}(),dontEnumFunctions:["constructor","hasOwnProperty","isPrototypeOf","toLocaleString","toString","propertyIsEnumerable","valueOf"]},l=[];return g.prototype={constructor:g,canCopy:function(){return!1},create:function(){},populate:function(){}},h.prototype={constructor:h,maxDepth:256,cacheResult:function(a,b){this.copiedObjects.push([a,b])},getCachedResult:function(a){for(var b=this.copiedObjects,c=b.length,d=0;c>d;d++)if(b[d][0]===a)return b[d][1];return void 0},deepCopy:function(a){if(null===a)return null;if("object"!=typeof a)return a;var b=this.getCachedResult(a);if(b)return b;for(var c=0;c<l.length;c++){var d=l[c];if(d.canCopy(a))return this.applyDeepCopier(d,a)}throw new Error("no DeepCopier is able to copy "+a)},applyDeepCopier:function(a,b){var c=a.create(b);if(this.cacheResult(b,c),this.depth++,this.depth>this.maxDepth)throw new Error("Exceeded max recursion depth in deep copy.");return a.populate(this.recursiveDeepCopy,b,c),this.depth--,c}},i.DeepCopier=g,i.deepCopiers=l,i.register=function(a){a instanceof g||(a=new g(a)),l.unshift(a)},i.register({canCopy:function(){return!0},create:function(a){return a instanceof a.constructor?b(a.constructor.prototype):{}},populate:function(a,b,c){if(k.hasDefineProperty)Object.getOwnPropertyNames(b).forEach(function(d){var e=Object.getOwnPropertyDescriptor(b,d);e.value=a(e.value),Object.defineProperty(c,d,e)});else{for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=a(b[d]));if(k.hasDontEnumBug)for(var e=0;e<k.dontEnumFunctions.length;e++)d=k.dontEnumFunctions[e],Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=a(b[d]))}return c}}),i.register({canCopy:function(a){return a instanceof Array},create:function(a){return new a.constructor},populate:function(a,b,c){for(var d=0;d<b.length;d++)c.push(a(b[d]));return c}}),i.register({canCopy:function(a){return c(a)},create:function(a){return new a.constructor(a.valueOf())}}),i.register({canCopy:function(a){return j(a)},create:function(a){return a===document?document:a.cloneNode(!1)},populate:function(a,b,c){if(b===document)return document;if(b.childNodes&&b.childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=a(b.childNodes[d]);c.appendChild(e)}}}),{DeepCopyAlgorithm:h,copy:f,clone:b,deepCopy:i}}();